(rule
 (targets gpiod.ml gpiod_stubs.c)
 (deps
  (:gen ../generator/generator.exe))
 (action
  (run %{gen})))

(library
 (name gpiod)
 (public_name gpiod)
 (foreign_stubs
  (language c)
  (names gpiod_stubs))
 (c_library_flags (-lgpiod))
 (modules gpiod))
